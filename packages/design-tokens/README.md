# Design Tokens for B.C. Design System

This package is used to export and publish design tokens from Figma to npm for the B.C. Design System. The tokens generated by this package are available for install from npm: [@bcgov/design-tokens](https://www.npmjs.com/package/@bcgov/design-tokens)

Questions? [Open a GitHub issue](https://github.com/bcgov/design-system/issues) or <a href="mailto:DesignSystem@gov.bc.ca">email the design system team/a>.

## Tokens usage

See `dist/README.md` (the README shipped with [the published package](https://www.npmjs.com/package/@bcgov/design-tokens)) for how to use the design tokens in your project.

## Development workflow

1. Collect design tokens input data from the [Tokens Studio for Figma](<https://www.figma.com/community/plugin/843461159747178978/Tokens-Studio-for-Figma-(Figma-Tokens)>) plugin
2. Transform the raw data from Tokens Studio using the [Style Dictionary](https://amzn.github.io/style-dictionary/#/) along with the [@tokens-studio/sd-transforms](https://github.com/tokens-studio/sd-transforms) custom transforms package for Tokens Studio data
3. Publish the output data on [npm](https://www.npmjs.com/)

## Steps to update and publish tokens

Publishing new versions of the package to npm is done via GitHub Actions. GitHub Actions are located in `/.github/workflows` in the project root.

To publish a new release:

1. Update token data in the JSON file `input/tokens.json` and the `version` field in `./package.json`.
2. Manually update composite tokens to include parent category. Ex: `{fontWeights.regular}` must become `{typography.fontWeights.regular}`.
3. Create and publish a GitHub release to trigger the publishing workflow

### GitHub release

GitHub releases are based on git tags.

```sh
# From your `main` branch, cut a new tag locally based on a commit SHA
git tag @bcgov/design-system-design-tokens@<version here> <commit SHA here>

# Push the tag to GitHub
git push --tags
```

From the [Releases page](https://github.com/bcgov/design-system/releases), click "Draft a new release".

For "Choose a tag", select the tag you created. For the previous tag, use the previous version of the same package.

Copy the changelog notes for the new version and link to the npm page for the new version. Ensure that `package.json` has been updated with the correct version number.

Publish the release to publish the latest version of the library on npm. The release tag must start with `@bcgov/design-tokens` to trigger the publish workflow.

## Test the build script

A Node.js test script is included to confirm that the build script runs as intended: `npm run test`

## Folder structure

```
.
├── CHANGELOG.md          - log of notable changes by version
├── README.md             - this file
├── build                 - output of build script from style-dictionary
├── build-output.js       - build script
├── build-output.test.js  - test suite for build script
├── dist                  - published to npm as @bcgov/design-tokens
│   ├── README.md         - instructions for using @bcgov/design-tokens
│   ├── cjs               - CommonJS tokens
│   ├── cjs-prefixed      - CommonJS tokens with "bcds" added
│   ├── css               - CSS tokens
│   ├── css-prefixed      - CSS tokens with "bcds" added
│   ├── scss              - SCSS tokens
│   ├── scss-prefixed     - SCSS tokens with "bcds" added
│   ├── js                - ECMAScript Module (ESM) tokens
│   ├── js-prefixed       - ESM tokens with "bcds" added
│   └── package.json      - package.json for @bcgov/design-tokens
├── input                 - raw design tokens JSON data from Tokens Studio for Figma
└── package.json          - package.json for tokens transformation pipeline
```
