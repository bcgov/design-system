# Design Tokens for B.C. Design System

[![Lifecycle:Maturing](https://img.shields.io/badge/Lifecycle-Maturing-007EC6)](https://github.com/bcgov/repomountie/blob/master/doc/lifecycle-badges.md)

This package is used to export and publish design tokens from Figma to npm for the B.C. Design System. The tokens generated by this package are available for install from npm: [@bcgov/design-tokens](https://www.npmjs.com/package/@bcgov/design-tokens)

Questions? Please email the <a href="mailto:DesignSystem@gov.bc.ca">GDX OSS Design Team</a>.

## Tokens usage

See `dist/README.md` for how to use the design tokens in your project.

## Development workflow

1. Collect design tokens input data from the [Tokens Studio for Figma](<https://www.figma.com/community/plugin/843461159747178978/Tokens-Studio-for-Figma-(Figma-Tokens)>) plugin
2. Transform the raw data from Tokens Studio using the [Style Dictionary](https://amzn.github.io/style-dictionary/#/) along with the [@tokens-studio/sd-transforms](https://github.com/tokens-studio/sd-transforms) custom transforms package for Tokens Studio data
3. Publish the output data on [npm](https://www.npmjs.com/)

## Steps to update and publish tokens

1. Update token data in the JSON file `input/tokens.json` and the `version` field in `./package.json`.
2. Manually update composite tokens to include parent category. Ex: `{fontWeights.regular}` must become `{typography.fontWeights.regular}`.
3. Run `npm run build` to run Style Dictionary, transforming the raw JSON data into usable token formats.
4. [Ensure `jq` is installed](https://jqlang.github.io/jq/) on your system and then run `npm run prepare-npm-package` to copy the contents of `build` into `dist`.
5. Run `npm run publish-npm-package` to publish the contents of `dist` to npm (defaults to using the `latest` tag). If publishing to the pre-release `next` tag, use `npm run publish-npm-package -- --tag next`.

## Test the build script

A Node.js test script is included to confirm that the build script runs as intended: `npm run test`

## Folder structure

```
.
├── CHANGELOG.md          - log of notable changes by version
├── README.md             - this file
├── build                 - output of build script from style-dictionary
├── build-output.js       - build script
├── build-output.test.js  - test suite for build script
├── dist                  - published to npm as @bcgov/design-tokens
│   ├── README.md         - instructions for using @bcgov/design-tokens
│   ├── cjs               - CommonJS tokens
│   ├── cjs-prefixed      - CommonJS tokens with "bcds" added
│   ├── css               - CSS tokens
│   ├── css-prefixed      - CSS tokens with "bcds" added
│   ├── js                - ECMAScript Module (ESM) tokens
│   ├── js-prefixed       - ESM tokens with "bcds" added
│   └── package.json      - package.json for @bcgov/design-tokens
├── input                 - raw design tokens JSON data from Tokens Studio for Figma
└── package.json          - package.json for tokens transformation pipeline
```
