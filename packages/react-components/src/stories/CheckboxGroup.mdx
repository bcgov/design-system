{/* CheckboxGroup.mdx */}

import {
  Canvas,
  Controls,
  Meta,
  Primary,
  Source,
  Story,
  Subtitle,
} from "@storybook/addon-docs/blocks";

import {
  InlineAlert,
  Link,
  SvgUpRightFromSquareIcon,
  SvgReactAriaIcon,
} from "@/components";

import * as CheckboxGroupStories from "./CheckboxGroup.stories";
import * as CheckboxStories from "./Checkbox.stories";

<Meta of={CheckboxGroupStories} />

# CheckboxGroup

<Subtitle>
  Checkboxes enable the user to select one or more options from a list.
</Subtitle>

<InlineAlert
  variant="info"
  customIcon={[<SvgReactAriaIcon />]}
  title="This is a React Aria component"
  description="It is based on the RA Checkbox and CheckboxGroup components. Consult the React Aria docs to understand its full API."
  buttons={[
    <Link
      isButton
      size="small"
      buttonVariant="secondary"
      href="https://react-aria.adobe.com/Checkbox"
      target="_blank"
      iconRight={[<SvgUpRightFromSquareIcon size={16} />]}
    >
      Checkbox docs
    </Link>,
    <Link
      isButton
      size="small"
      buttonVariant="secondary"
      href="https://react-aria.adobe.com/CheckboxGroup"
      target="_blank"
      iconRight={[<SvgUpRightFromSquareIcon size={16} />]}
    >
      CheckboxGroup docs
    </Link>,
  ]}
/>

## Usage and resources

<Source
  code={`import { CheckboxGroup, Checkbox } from "@bcgov/design-system-react-components";`}
  language="typescript"
/>

Learn more about working with the CheckboxGroup and Checkbox components:

- [Usage and best practice guidance](https://www2.gov.bc.ca/gov/content?id=074FAD78863442AEAF2453BC18B28D2A)
- [View the select component in Figma](https://www2.gov.bc.ca/gov/content?id=8E36BE1D10E04A17B0CD4D913FA7AC43#designers)

### Validation

Default and custom data validation support is built in, using the [React Aria FieldError subcomponent](https://react-spectrum.adobe.com/react-aria/CheckboxGroup.html#validation).

## Configuration

A checkbox group comprises two components:

- [Checkbox](#checkbox) defines an individual list item
- [CheckboxGroup](#checkboxgroup-1) provides a wrapper for multiple `Checkbox` components, and handles state management and data validation

Each component has its own set of supported props.

## Controls

### CheckboxGroup controls

<Canvas of={CheckboxGroupStories.CheckboxGroupTemplate} />
<Controls of={CheckboxGroupStories.CheckboxGroupTemplate} />

### Checkbox controls

<Canvas of={CheckboxStories.CheckboxTemplate} />
<Controls of={CheckboxStories.CheckboxTemplate} />

## Checkbox

`Checkbox` renders a focusable and selectable checkbox, along with a text label (set via the `children` slot).

Each checkbox should also have a unique identifier, set using the `value` prop. This is used for data validation and submission. If two checkboxes have the same `value`, selecting one will set both to `isSelected`.

Use `defaultSelected` to make a checkbox selected by default:

<Canvas of={CheckboxStories.DefaultSelectedCheckbox} />

Use `isRequired` to mark a checkbox as mandatory and display a "(required)" label:

<Canvas of={CheckboxStories.RequiredCheckbox} />

### States

Disable a checkbox using `isDisabled`. A disabled checkbox cannot be focused or selected:

<Canvas of={CheckboxStories.DisabledCheckbox} />

Set `isReadOnly` to lock a checkbox to its current value. A read-only checkbox can be focused, but cannot be selected:

<Canvas of={CheckboxStories.ReadOnlyCheckbox} />

A checkbox can be put in [an 'indeterminate' (mixed/uncertain) state](https://react-spectrum.adobe.com/react-aria/Checkbox.html#indeterminate) using `isIndeterminate`:

<Canvas of={CheckboxStories.IndeterminateCheckbox} />

`isIndeterminate` overrides the checkbox's appearance, until it is set to `false` (for example, conditionally based on other selections.)

## CheckboxGroup

`CheckboxGroup` wraps multiple checkboxes into a group. It expects an array of `Checkbox` components passed as `children`.

Use the `label` and `description` props to explain the purpose of a checkbox group:

<Canvas of={CheckboxGroupStories.CheckboxGroupWithLabelAndDescription} />

If you do not provide a visible `label`, you must instead pass an `aria-label` prop for use by assistive technologies.

You can toggle the layout of a checkbox group between `vertical` (default) and `horizontal` using the `orientation` prop:

<Canvas of={CheckboxGroupStories.HorizontalCheckboxGroup} />

### Required input

Pass `isRequired` to make input mandatory, and display an additional "(required)" label:

<Canvas of={CheckboxGroupStories.RequiredCheckboxGroup} />

### Disabled state

You can disable an entire checkbox group using `isDisabled`:

<Canvas of={CheckboxGroupStories.DisabledCheckboxGroup} />

### Validation and error handling

You can [configure validation behaviour](https://react-spectrum.adobe.com/react-aria/CheckboxGroup.html#validation) at the group or individual checkbox level. Set the `isInvalid` prop to display error messages based on your app's validation logic.

You can also use a [Form wrapper](/docs/utility-form-wrapper--docs) to configure validation and submission behaviour for multiple input components.

<Canvas of={CheckboxGroupStories.CheckboxGroupWithErrors} />

`CheckboxGroup` uses the FieldError subcomponent to render error messages. You can pass custom or dynamically-generated content to the `errorMessage` slot.
